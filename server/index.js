const express = require('express');
const cors = require('cors');
const path = require('path');
require('dotenv').config();

const app = express();
const PORT = process.env.PORT || 5000;

// Middleware
app.use(cors());
app.use(express.json());

// Company data in Mongolian
const companyData = {
  home: {
    title: "Alma Chem Trade LLC",
    subtitle: "Химийн бодисын импорт, зөвлөгөөний үйлчилгээ",
    introduction: {
      paragraph1: "Alma Chem Trade LLC бол уул уурхай, боловсруулах болон аж үйлдвэрийн салбарт шаардлагатай химийн бодисуудыг олон улсын найдвартай үйлдвэрлэгчдээс шууд импортолж, Монголын зах зээлд найдвартай нийлүүлдэг худалдааны компани юм.",
      paragraph2: "Манай зорилго нь чанарын бүтээгдэхүүн болон хамтын ажиллагааны уян хатан нөхцөлийг хангаж, үйлчлүүлэгчдийн үйл ажиллагааг тасралтгүй дэмжих явдал юм."
    },
    advantages: [
      "Олон улсын найдвартай үйлдвэрлэгчдтэй шууд хамтын ажиллагаа",
      "Агуулах, савлагаа, тээвэрлэлтийн стандарт шийдэл",
      "Уул уурхайн компаниудын тусгай хэрэгцээнд тохирсон бүтээгдэхүүн болон үйлчилгээ"
    ]
  },
  about: {
    history: "Бид олон улсын үйлдвэрлэгчдтэй шууд хамтын ажиллагаа тогтоож, Монголын нөхцөлд тохирсон оновчтой нийлүүлэлтийн шийдлийг хэрэгжүүлсэн. Удахгүй Alma Chem Trade нь уул уурхай болон боловсруулах салбарын найдвартай, урт хугацааны түнш болох зорилготой.",
    mission: "Монгол улсад химийн импорт болон зөвлөгөөний үйлчилгээний салбарт шинэчлэгч, тэргүүлэгч мэргэжлийн компани болж, уул уурхай болон аж үйлдвэрийн салбарын тогтвортой хөгжлийг дэмжих.",
    vision: "Монгол улсад химийн импорт болон зөвлөгөөний үйлчилгээний салбарт шинэчлэгч, тэргүүлэгч мэргэжлийн компани болж, уул уурхай болон аж үйлдвэрийн салбарын тогтвортой хөгжлийг дэмжих."
  },
  services: [
    "Химийн бодисын импорт",
    "Химийн бодисын аюулгүй хэрэглээ, хадгалалт, агуулахын менежментийн зөвлөгөө",
    "Лабораторийн судалгаа, шинжилгээ, туршилтын ажлын зохион байгуулалт",
    "Уул уурхайн үйлдвэрлэл, туршилтын технологид судалгаа явуулах",
    "Алт олборлолтын зориулалттай цианидын уусгалтын иж бүрэн шийдэл (төлөвлөлт, тоног төхөөрөмжийн сонголт, угсралт, технологийн удирдлага, хяналт)",
    "Лаборатори болон туршилтын үр дүнд тулгуурласан үйлдвэрлэлийн процессын оновчтой шийдэл, бүтээгдэхүүний чанар, технологийн сонголтын сайжруулалт"
  ],
  products: [
    "Уул уурхайд ашиглагдах химийн бодисууд",
    "Боловсруулах үйлдвэрт ашиглагдах бүтээгдэхүүнүүд",
    "Агуулах, савлагаа, тээврийн стандарт шийдэл"
  ],
  clients: [
    "Уул уурхайн компаниуд",
    "Боловсруулах үйлдвэрүүд",
    "Түнш байгууллагууд"
  ],
  news: [
    {
      id: 1,
      title: "Alma Chem Trade компани шинэ химийн бүтээгдэхүүнүүдийг зах зээлд нэвтрүүлж байна",
      excerpt: "Манай компани олон улсын найдвартай үйлдвэрлэгчдтэй хамтран ажиллаж, уул уурхайн салбарт шаардлагатай шинэ химийн бүтээгдэхүүнүүдийг Монголын зах зээлд нэвтрүүлж байна.",
      date: "2024-01-15",
      category: "Бүтээгдэхүүн"
    },
    {
      id: 2,
      title: "Байгаль орчны аюулгүй байдлын шинэ стандартууд",
      excerpt: "Химийн бодисын аюулгүй хадгалалт, тээвэрлэлт болон хэрэглээний талаарх олон улсын шинэ стандартуудыг танилцуулж байна.",
      date: "2024-01-10",
      category: "Аюулгүй байдал"
    },
    {
      id: 3,
      title: "Уул уурхайн технологийн шинэчлэлт",
      excerpt: "Алт олборлолтын цианидын уусгалтын технологийн шинэ арга техникийг танилцуулж, үйлдвэрлэлийн үр ашгийг нэмэгдүүлэх шийдлүүдийг санал болгож байна.",
      date: "2024-01-05",
      category: "Технологи"
    },
    {
      id: 4,
      title: "Химийн бодисын импортын шинэ дүрэм журам",
      excerpt: "Монгол улсын химийн бодисын импортын талаарх шинэ дүрэм журамд тулгуурлан, үйлчлүүлэгчдэд зориулсан зөвлөгөөний үйлчилгээг өргөжүүлж байна.",
      date: "2023-12-28",
      category: "Дүрэм журам"
    },
    {
      id: 5,
      title: "Олон улсын хамтын ажиллагааны шинэ гэрээ",
      excerpt: "Дэлхийн тэргүүлэгч химийн үйлдвэрлэгч компаниудтай шинэ хамтын ажиллагааны гэрээ байгуулж, чанарын баталгаатай бүтээгдэхүүнийг хангах боломжтой боллоо.",
      date: "2023-12-20",
      category: "Хамтын ажиллагаа"
    },
    {
      id: 6,
      title: "Лабораторийн шинжилгээний шинэ тоног төхөөрөмж",
      excerpt: "Манай лабораторид шинэ тоног төхөөрөмж суурилуулж, химийн бодисын шинжилгээний чанарыг сайжруулж, үйлчлүүлэгчдэд илүү нарийвчлалтай үр дүн өгөх боломжтой боллоо.",
      date: "2023-12-15",
      category: "Лаборатори"
    }
  ],
  jobs: {
    openPositions: [
      {
        id: 1,
        title: "Химийн инженер",
        description: "Уул уурхайн химийн бодисын судалгаа, шинжилгээ, зөвлөгөөний ажил хийх мэргэжилтэн",
        location: "Улаанбаатар",
        type: "Бүтэн цагийн",
        experience: "3+ жил",
        requirements: [
          "Химийн инженерийн мэргэжлээр дээд боловсрол",
          "Уул уурхайн салбарын туршлага",
          "Англи хэлний мэдлэг",
          "Компьютерийн програм хангамжийн мэдлэг"
        ]
      },
      {
        id: 2,
        title: "Лабораторийн техникч",
        description: "Химийн шинжилгээ, туршилтын ажил, тоног төхөөрөмжийн засвар үйлчилгээ",
        location: "Улаанбаатар",
        type: "Бүтэн цагийн",
        experience: "2+ жил",
        requirements: [
          "Химийн технологийн мэргэжлээр дээд боловсрол",
          "Лабораторийн ажлын туршлага",
          "Тоног төхөөрөмжийн засвар үйлчилгээний мэдлэг",
          "Анхааралтай, нарийвчлалтай ажиллах чадвар"
        ]
      },
      {
        id: 3,
        title: "Харилцагч харилцааны менежер",
        description: "Харилцагчтай харилцах, төслийн удирдлага, борлуулалтын ажил",
        location: "Улаанбаатар",
        type: "Бүтэн цагийн",
        experience: "5+ жил",
        requirements: [
          "Бизнес удирдлагын мэргэжлээр дээд боловсрол",
          "Харилцагчтай харилцах туршлага",
          "Англи, орос хэлний мэдлэг",
          "Удирдлагын чадвар"
        ]
      }
    ],
    hrPolicy: {
      title: "Хүний нөөцийн бодлого",
      benefits: [
        "Мэргэжлийн хөгжил",
        "Хамтын ажиллагаа",
        "Тогтвортой ажил",
        "Сайн цалин хөлс",
        "Эрүүл мэндийн даатгал",
        "Амралтын өдрүүд"
      ]
    }
  },
  contact: {
    address: "Монгол Улс, Улаанбаатар 14220, Сүхбаатар дүүрэг, 1-р хороо, Элчин сайдын гудамж, Скай Плаза бизнес төв, 9 тоот",
    phone: "+976 88042323",
    email: "Info@khimiconsulting.mn"
  }
};

// API Routes
app.get('/api/home', (req, res) => {
  res.json(companyData.home);
});

app.get('/api/about', (req, res) => {
  res.json(companyData.about);
});

app.get('/api/services', (req, res) => {
  res.json(companyData.services);
});

app.get('/api/products', (req, res) => {
  res.json(companyData.products);
});

app.get('/api/clients', (req, res) => {
  res.json(companyData.clients);
});

app.get('/api/news', (req, res) => {
  res.json(companyData.news);
});

app.get('/api/jobs', (req, res) => {
  res.json(companyData.jobs);
});

app.get('/api/contact', (req, res) => {
  res.json(companyData.contact);
});

// Serve static files from React build
if (process.env.NODE_ENV === 'production') {
  app.use(express.static(path.join(__dirname, '../client/build')));
  
  app.get('*', (req, res) => {
    res.sendFile(path.join(__dirname, '../client/build', 'index.html'));
  });
}

app.listen(PORT, () => {
  console.log(`Server is running on port ${PORT}`);
});
